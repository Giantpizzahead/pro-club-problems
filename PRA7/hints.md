1. <a href="https://stackoverflow.com/questions/23946397/finding-the-mode-of-integers-in-an-array" target="_blank">Finding the mode of an array</a>

2. Making a function to find the mode of a subarray would help a lot with the queries.

Bonus hint: Doing some **preprocessing** on the array might allow the queries to be answered by just looking up the answer in a precomputed table. The bound on $N$ seems pretty low...